FROM python:3.11
ENV PYTHONUNBUFFERED=1

ENV ADD_HOTEL_QUEUE=AddHotelQueue
ENV ADD_FLIGHT_QUEUE=AddFlightQueue
ENV ADD_TRIP_QUEUE=AddTripQueue

ENV GET_HOTELS_QUEUE=GetHotelsQueue
ENV GET_HOTEL_DETAILS_QUEUE=GetHotelDetailsQueue
ENV GET_FLIGHTS_QUEUE=GetFlightsQueue
ENV GET_TRIPS_QUEUE=GetTripsQueue

ENV REMOVE_TRIP_QUEUE=RemoveTripQueue

ENV UPDATE_FLIGHT_PRICE_QUEUE=UpdateFlightPriceQueue
ENV UPDATE_ROOM_PRICE_QUEUE=UpdateRoomPriceQueue

ENV MIN_WAIT_TIME=3
ENV MAX_WAIT_TIME=8

ENV AMQP_RECONNECTION_TRIES=15
ENV AMQP_RECONNECTION_DELAY=5

WORKDIR /app
COPY requirements.txt /app/requirements.txt
RUN pip install -r requirements.txt
COPY . /app

CMD python tour_operator.py