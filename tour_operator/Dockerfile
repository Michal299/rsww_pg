FROM python:3.11
ENV PYTHONUNBUFFERED=1

ENV ADD_HOTEL_QUEUE=AddHotelQueue
ENV ADD_FLIGHT_QUEUE=AddFlightQueue
ENV ADD_TRIP_QUEUE=AddTripQueue

ENV GET_HOTELS_QUEUE=GetHotelsQueue
ENV GET_HOTEL_DETAILS_QUEUE=GetHotelDetailsQueue
ENV GET_FLIGHTS_QUEUE=GetFlightsQueue
ENV GET_TRIPS_QUEUE=GetTripsQueue
ENV GET_TO_LATEST_UPDATES_QUEUE=GetTOLatestUpdatesQueue

ENV REMOVE_TRIP_QUEUE=RemoveTripQueue

ENV UPDATE_FLIGHT_PRICE_QUEUE=UpdateFlightPriceQueue
ENV UPDATE_ROOM_PRICE_QUEUE=UpdateRoomPriceQueue

ENV LATEST_UPDATES_NUMBER=10

ENV MIN_WAIT_TIME=3
ENV MAX_WAIT_TIME=8
ENV SLEEP_TIME=0.5

ENV AMQP_RECONNECTION_TRIES=20
ENV AMQP_RECONNECTION_DELAY=8

WORKDIR /app
COPY requirements.txt /app/requirements.txt
RUN pip install -r requirements.txt
COPY . /app

CMD python tour_operator.py